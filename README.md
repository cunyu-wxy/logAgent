# logAgent-自适应配置日志收集

# 项目背景
每个业务系统都有日志，当系统出现问题时，需要通过日志信息来定位和解决问题，当系统机器较少时，登录到服务器上查看即可定位，但是当下云原生时代，系统机器规模巨大，登录到具体机器上查看几乎不现实

# 系统功能特点
- 基于golang开发
- 可自动获取机器配置文件，根据配置文件自适应记录日志
- 实时收集日志存储到中心系统
- 对日志建立索引，可通过ES快速检索
- web界面实现日志展示与检索

# 面对的问题
实时日志量非常大，每天日志量亿级别，需要日志准时收集，延迟控制分钟级，系统架构可以支持水平扩展

# 业界方案
__ELK__

![ELK](https://pica.zhimg.com/v2-b349e241dfc66008f0b911bd4d761e5c_1440w.jpg?source=172ae18b)

__ELK的问题__
- 运维成本高，每增加一个日志收集项，都要手动修改配置
- 监控缺失，无法准确获取logStash(Kafka)状态信息
- 无法定制开发维护

# 架构
每台机器通过Etcd记录配置日志项，用户通过配置Etcd告知需要记录的日志项，logAgent模块通过读取Etcd配置项来得知需要记录的日志，当配置更新时，logAgent自动得知配置更改，拉取需要的日志信息，并发送到Kafka中，Kafka记录保存日志，供用户消费或持久化。
